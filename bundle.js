(()=>{"use strict";var e={523:(e,t,n)=>{n.d(t,{A:()=>p});var o=n(601),i=n.n(o),r=n(314),a=n.n(r),s=n(417),l=n.n(s),c=new URL(n(611),n.b),d=a()(i()),u=l()(c);d.push([e.id,`:root {\n    --purple1: #0C0032;\n    --purple2: #190061;\n    --purple3: #3500D3;\n    --grey: #282828;\n}\n\n@font-face {\n    font-family: 'VT323';\n    src: url(${u}) format('ttf');\n    font-weight: 400;\n    font-style: normal;\n}\n\nhtml, body {\n    margin: 0;\n    height: 100%;\n    color: white;\n    font-family: 'VT323';\n    font-size: 120%;\n}\n\n.hello {\n    font-family: 'VT323';\n}\n\n.container {\n    min-height: 100%;\n    display: grid;\n    grid-template-columns: 2fr 2fr 2fr 2fr 3fr;\n    grid-template-rows: 70px 450px 1fr 70px;\n}\n\n.top_bar {\n    padding: 10px;\n    background-color: var(--purple3);\n    grid-column: 1 / 7;\n}\n\n.image_window {\n    padding: 10px;\n    background-color: var(--purple1);\n    grid-column: 1 / 3;\n    grid-row: 2 / 4;\n}\n\n.image_window button {\n    font-size: 100%;\n}\n\n.image_window button:hover {\n    background-color: var(--purple2);\n}\n\n.image_window p {\n    margin-bottom: 5px;\n}\n\n.main_window {\n    padding: 10px;\n    background-color: var(--purple1);\n    grid-column: 3 / 5;\n    grid-row: 2 / 4\n}\n\n.main_window p, .main_window button, .main_window input {\n    opacity: 0;\n    animation: fadeIn 1s ease-out forwards;\n}\n\ndialog {\n    opacity: 0;\n    animation: fadeIn 1s ease-out forwards;\n}\n\n.hide {\n    animation: fadeOut 1s ease-out forwards;\n}\n\n@keyframes fadeIn {\n    from {\n        opacity: 0;\n    }\n    to {\n        opacity: 1;\n    }\n}\n\n@keyframes fadeOut{\n    from {\n        opacity: 1;\n    }\n    to {\n        opacity: 0;\n    }\n}\n\n.main_window button {\n    font-size: 90%;\n    margin-bottom: 10px;\n}\n\n.main_window .choiceButton {\n    display: block;\n}\n\n.main_window button:hover{\n    background-color: var(--purple2);\n}\n\n.main_window input {\n    background-color: var(--grey);\n    color: white;\n    font-family: 'VT323';\n    font-size: 100%;\n    margin-right: 5px;\n    padding: 5px;\n    border: 1px solid var(--purple1);\n}\n\n.main_window input[type=submit] {\n    background-color: var(--grey);\n    color: white;\n    font-family: 'VT323';\n    font-size: 100%;\n    padding: 5px;\n    border: 1px solid var(--purple1);\n}\n\n.main_window input[type=submit]:hover {\n    background-color: var(--purple2);\n}\n\n.button_window {\n    padding: 10px;\n    background-color: var(--purple3);\n    grid-column: 1 / 7;\n    grid-row: 4;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    gap: 20px;\n}\n\nbutton {\n    background-color: var(--grey);\n    color: white;\n    font-family: 'VT323';\n    border: none;\n}\n\nbutton:hover {\n    background-color: var(--purple1);\n}\n\n.button_window button {\n    font-size: 200%;\n}\n\n.log {\n    overflow: scroll;\n    padding: 10px;\n    background-color: var(--purple2);\n    grid-column: 5 / 6;\n}\n\n.menu {\n    padding: 10px;\n    background-color: var(--purple2);\n    grid-column: 5 / 6;\n}\n\ndialog {\n    background-color: var(--purple2);\n    color: white;\n    font-size: 85%;\n    max-width: 500px;\n}\n\n#closeButton, #closeButton2 {\n    margin-left:450px;\n    font-size:80%;\n}\n\n.stats_meter {\n    border: 1px solid white;\n    display: grid;\n    grid-template-columns: 50fr 50fr;\n}\n\n#stats_meter_evil {\n    margin-top: 15px;\n}\n\n#stats_line_evil, #stats_line_somber {\n    background-color: maroon;\n    padding-left: 5px;\n}\n\n#stats_line_benevolent, #stats_line_silly {\n    background-color: blue;\n    padding-left: 5px;\n}\n\n@media screen and (max-width:768px) {\n    .container {\n        min-height: 100%;\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        grid-template-rows: 50px 580px 250px 65px;\n    }\n    p:first-child {\n        margin-top: 0;\n    }\n    .top_bar {\n        grid-column: 1 / 3;\n        grid-row: 1 / 5;\n    }\n    .image_window {\n        grid-column: 1;\n        grid-row: 2;\n        font-size: 80%;\n    }\n    #explorationBoard {\n        display: flex;\n        flex-direction: column;\n    }\n    .main_window {\n        grid-column: 2;\n        grid-row: 2;\n        overflow: scroll;\n    }\n    .button_window {\n        grid-column: 1 / 3;\n        grid-row: 4;\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        grid-template-rows: 1fr 1fr;\n        gap: 5px;\n    }\n    .button_window button {\n        font-size: 90%;\n    }\n    .log {\n        grid-column: 1;\n        grid-row: 3;\n        font-size: 80%;\n    }\n    .menu {\n        grid-column: 2;\n        grid-row: 3;\n    }\n    dialog {\n        max-width: 270px;\n    }\n    #closeButton, #closeButton2 {\n        margin-left:250px;\n        font-size:80%;\n    }\n    .main_window input[type=text] {\n        width:120px;\n    }\n}`,""]);const p=d},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,i,r){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);o&&a[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},417:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var r={},a=[],s=0;s<e.length;s++){var l=e[s],c=o.base?l[0]+o.base:l[0],d=r[c]||0,u="".concat(c," ").concat(d);r[c]=d+1;var p=n(u),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var h=i(m,o);o.byIndex=s,t.splice(s,0,{identifier:u,updater:h,references:1})}a.push(u)}return a}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var r=o(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<r.length;a++){var s=n(r[a]);t[s].references--}for(var l=o(e,i),c=0;c<r.length;c++){var d=n(r[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}r=l}}},659:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,i&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},611:(e,t,n)=>{e.exports=n.p+"2bc43ad8eb2f60b39f27.ttf"}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={id:o,exports:{}};return e[o](r,r.exports,n),r.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var i=o.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=o[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var e=n(72),t=n.n(e),o=n(825),i=n.n(o),r=n(659),a=n.n(r),s=n(56),l=n.n(s),c=n(540),d=n.n(c),u=n(113),p=n.n(u),m=n(523),h={};h.styleTagTransform=p(),h.setAttributes=l(),h.insert=a().bind(null,"head"),h.domAPI=i(),h.insertStyleElement=d(),t()(m.A,h),m.A&&m.A.locals&&m.A.locals;let f,g=[];function y(e){if(e.currentHP<=0){let t=document.createElement("p");t.textContent=`${e.name} dies!`,t.setAttribute("style","color:yellow"),H.appendChild(t);let n=g.findIndex((t=>t.name==e.name));g.splice(n,1),0==g.length&&isBattleOver("win")}A.currentHP<=0&&isBattleOver("lose")}function x(){let e=document.querySelector("#explorationBoard");Array.from(M.children).forEach((t=>{t!==e&&M.removeChild(t)})),g.forEach((e=>{let t=document.createElement("p"),n=document.createElement("button");t.textContent=`${e.name} stands there. It has AC of ${e.armorClass}, attack bonus of ${e.monsterAttackBonus} and HP of ${e.currentHP}/${e.maxHP}.`,n.textContent="Select",n.setAttribute("id",e.name),n.addEventListener("click",(()=>{return f=t=e,void(B.textContent=`Selected enemy: ${t.name}.`);var t})),M.appendChild(t),M.appendChild(n)}))}document.querySelector("#attackButton").addEventListener("click",(()=>A.attack(f)));let b=document.querySelector(".log");function w(e,t,n,o,i,r,a,s,l,c){this.name=e,this.attackBonus=t,this.armorClass=n,this.currentHP=o,this.maxHP=i,this.specialAttack=r,this.equippedWeapon="",this.equippedArmor="",this.equippedMisc="",this.inventory=[]}function v(e,t,n,o,i,r){this.name=e,this.monsterAttackBonus=t,this.armorClass=n,this.currentHP=o,this.maxHP=i,this.status=r}function C(e,t,n,o,i,r,a,s,l,c){w.call(this,e,t,n,o,i,r,a,s,l,c)}function k(e,t,n,o,i,r,a,s,l,c){w.call(this,e,t,n,o,i,r,a,s,l,c)}function E(e,t,n,o,i,r,a,s,l,c){w.call(this,e,t,n,o,i,r,a,s,l,c)}w.prototype.attack=function(e){if(0!==g.length)if(void 0!==e){if(g.forEach((e=>{if("burning"==e.status){e.currentHP=e.currentHP-5,y(e);let t=document.createElement("p");t.textContent=`${e.name} is burning for 5 damage!`,t.setAttribute("style","color:yellow"),b.appendChild(t)}})),g.forEach((e=>{e.status=""})),Array.from(b.children).forEach((e=>{e.setAttribute("style","color:white;")})),e.currentHP>0){let t=Math.floor(20*Math.random()+1+this.attackBonus);""!==A.equippedWeapon&&(t+=this.equippedWeapon.itemAttack),""!==A.equippedArmor&&(t=+t+this.equippedArmor.itemAttack),""!==A.equippedMisc&&(t=+t+this.equippedMisc.itemAttack);let n="",o=0,i=0;switch(this.specialAttack){case"Normal Attack":break;case"Bucket Splash":n=" with the Bucket Splash (-2 accuracy, +2 damage if hits)",o=-2,i=4;break;case"Healing Twirl":o=-1e3;break;case"Book Toss":n=" with the Book Toss (-4 accuracy, but +6 damage if hits)",o=-4,i=6;break;case"Broom Smash":case"Capoiera Kick":n=" with the Capoiera Kick (-4 accuracy, but stuns the target)",o=-4,t+o>e.armorClass&&(e.status="stunned");break;case"Torch Throw (to burn tax evasion evidence)":n=" with the Torch Toss (usually used to burn away tax evasion evidence; -4 accuracy, but sets target on fire for one turn)",o=-4,t+o>e.armorClass&&(e.status="burning")}if(t+o>e.armorClass){e.currentHP-=t+o+i-e.armorClass;let r=document.createElement("p");r.textContent=`${this.name} attacks ${e.name}${n}! The attack hits and deals ${t+o+i-e.armorClass} damage!`,r.setAttribute("style","color:yellow"),b.appendChild(r),y(e),x()}else if("Healing Twirl"==this.specialAttack){let e,t=this.maxHP-this.currentHP;t>5?(this.currentHP=this.currentHP+5,e=5):t>0?(e=t,this.currentHP=this.maxHP):e=0;let n=document.createElement("p");n.textContent=`${this.name} does a Healing Twirl, healing themself for ${e} HP!`,n.setAttribute("style","color:yellow"),b.appendChild(n),T()}else{let t=document.createElement("p");t.textContent=`${this.name} attacks ${e.name}! The attack misses!`,t.setAttribute("style","color:yellow"),b.appendChild(t)}0!==g.length&&g.forEach((e=>{if("stunned"!==e.status)e.counterattack();else if("stunned"==e.status){let t=document.createElement("p");t.textContent=`${e.name} is stunned!`,t.setAttribute("style","color:yellow"),b.appendChild(t)}}))}}else{let e=document.createElement("p");e.textContent="Which monster do I attack?",b.appendChild(e)}else{let e=document.createElement("p");e.textContent="No monsters around.",b.appendChild(e)}},Object.setPrototypeOf(C.prototype,w.prototype),Object.setPrototypeOf(k.prototype,w.prototype),Object.setPrototypeOf(E.prototype,w.prototype);let A=new w("Dude",25,15,100,100,"Normal Attack","","","",[]),q=new v("Goblin",0,10,40,40,""),S=new v("Goblin Fighter",2,13,25,25,""),_=(new v("Goblin Shaman",3,16,30,30,""),new v("Goblin Chieftain",5,17,40,40,"")),L=(new v("Half Dead Old Guy",-1,10,5,5,""),new v("Red Imp",0,5,5,5,"")),$=new v("Blue Imp",0,5,5,5,"");function T(){document.querySelector(".menu").textContent=A instanceof C?`You are ${A.name}. Your are a Janitor. Your armor class is ${A.armorClass}. Your HP is ${A.currentHP}/${A.maxHP}.`:A instanceof k?`You are ${A.name}. Your are an Accountant. Your armor class is ${A.armorClass}. Your HP is ${A.currentHP}/${A.maxHP}.`:A instanceof E?`You are ${A.name}. Your are a Dancer. Your armor class is ${A.armorClass}. Your HP is ${A.currentHP}/${A.maxHP}.`:`You are ${A.name}. Your class is unknown. Your armor class is ${A.armorClass}. Your HP is ${A.currentHP}/${A.maxHP}.`}v.prototype.counterattack=function(){let e=Math.floor(20*Math.random()+1)+this.monsterAttackBonus;if(e>A.armorClass){A.currentHP-=e-A.armorClass,T();let t=document.createElement("p");t.textContent=`${this.name} attacks ${A.name}! The attack hits and deals ${e-A.armorClass} damage!`,t.setAttribute("style","color:yellow"),b.appendChild(t)}else{let e=document.createElement("p");e.textContent=`${this.name} attacks ${A.name}! The attack misses!`,e.setAttribute("style","color:yellow"),b.appendChild(e)}};let B=document.querySelector(".top_bar"),H=document.querySelector(".log"),P=document.querySelector(".main_window"),M=document.querySelector(".image_window"),N=document.querySelector(".menu"),Y=(document.querySelector(".button_window"),document.querySelector("#attackButton"),document.querySelector("#specialButton")),I=document.querySelector("#inventoryButton"),D=document.querySelector("#statsButton");function O(e){let t=e&&e.target?e.target:e;"DIALOG"==t.tagName?t.close():t.remove(),t.classList.remove("hide"),t.removeEventListener("animationend",O)}N.textContent=`You are a person. Your class is unknown. Your armor class is ${A.armorClass}. Your HP is ${A.currentHP}/${A.maxHP}.`;let W=document.createElement("dialog");W.setAttribute("style","height:68%;width:100%;z-index:1000;overflow:hidden;"),document.body.appendChild(W),W.innerHTML="\n<img src='title.png' style='width:100%;margin-top:15px;'>   \n<div style='display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:50px;'>\n    <button id='startGameButton' style='font-size:150%;display:block;margin:0 auto; border: 1px solid silver; border-radius: 5px; margin-bottom:20px;width:250px;'>Start game</button>\n    <button id='settingsButton' style='font-size:150%;display:block;margin:0 auto; border: 1px solid silver; border-radius: 5px; margin-bottom:20px;width:250px;'>Settings</button>\n    <button id='aboutButton' style='font-size:150%;display:block;margin:0 auto; border: 1px solid silver; border-radius: 5px; margin-bottom:20px;width:250px;'>About the creator</button>\n    <button id='contactButton' style='font-size:150%;display:block;margin:0 auto; border: 1px solid silver; border-radius: 5px; margin-bottom:20px;width:250px;'>Contact me</button>\n</div>\n<br>\n<p style='color:white;'><i>Note: If you play on mobile, scroll to the bottom of the screen to see the action buttons.</i></p>\n",W.showModal();let z=document.createElement("div");z.setAttribute("style","background-color:black;position:absolute;height:1000px;width:100%;z-index:500;"),document.querySelector(".container").appendChild(z),document.body.style.overflow="hidden";let R=document.querySelector("#startGameButton"),j=!1;R.addEventListener("click",(()=>{W.classList.add("hide"),W.addEventListener("animationend",(()=>{O(W),j=!0,j&&(z.classList.add("hide"),z.addEventListener("animationend",O),document.body.style.overflow="visible")}))}));let G=document.createElement("dialog");G.setAttribute("style","max-width:500px;"),G.innerHTML="\n    <button id='closeButton'>Close</button>\n    <div id='inventoryBox'>\n        <h2>Inventory</h2>\n        <div id='equippedBox'>\n            Equipped weapon: <span id='equippedWeaponBox'></span>\n            <br>\n            Equipped armor: <span id='equippedArmorBox'></span>\n            <br>\n            Equipped misc: <span id='equippedMiscBox'></span>\n        </div>\n        <br>\n        <br>\n        <div id='allBox'>\n            Bag:\n            <ul id='allList'>\n            </ul>\n        </div>\n    </div>\n",document.body.appendChild(G),I.addEventListener("click",(()=>{G.showModal(),document.querySelector("#closeButton").addEventListener("click",(()=>{G.classList.add("hide"),G.addEventListener("animationend",O)}))}));let U=document.querySelector("#equippedWeaponBox"),F=document.querySelector("#equippedArmorBox"),J=document.querySelector("#equippedMiscBox"),V=document.querySelector("#allList");function K(e){if(A.inventory.includes(e))switch(e.type){case"weapon":if(""==A.equippedWeapon){A.equippedWeapon=e,A.armorClass=A.armorClass+A.equippedWeapon.itemArmor,U.textContent=`${e.name}`;let t=document.querySelector(`#${e.id}`);t.textContent="Unequip",t.removeEventListener("click",(()=>K(e))),t.addEventListener("click",(()=>X(e))),T()}break;case"armor":if(""==A.equippedArmor){A.equippedArmor=e,A.armorClass=A.armorClass+A.equippedArmor.itemArmor,F.textContent=`${e.name}`;let t=document.querySelector(`#${e.id}`);t.textContent="Unequip",t.removeEventListener("click",(()=>K(e))),t.addEventListener("click",(()=>X(e))),T()}break;case"misc":if(""==A.equippedMisc){A.equippedMisc=e,A.armorClass=A.armorClass+A.equippedMisc.itemArmor,J.textContent=`${e.name}`;let t=document.querySelector(`#${e.id}`);t.textContent="Unequip",t.removeEventListener("click",(()=>K(e))),t.addEventListener("click",(()=>X(e))),T()}}}function X(e){if(A.equippedWeapon==e||A.equippedArmor==e||A.equippedMisc==e){A.equippedWeapon==e?(A.armorClass=A.armorClass-A.equippedWeapon.itemArmor,A.equippedWeapon="",U.textContent=""):A.equippedArmor==e?(A.armorClass=A.armorClass-A.equippedArmor.itemArmor,A.equippedArmor="",F.textContent=""):A.equippedMisc==e&&(A.armorClass=A.armorClass-A.equippedMisc.itemArmor,A.equippedMisc="",J.textContent=""),T();let t=document.querySelector(`#${e.id}`);t.textContent="Equip",t.removeEventListener("click",(()=>X(e))),t.addEventListener("click",(()=>K(e)))}}function Q(e,t,n,o,i){return{name:e,type:t,itemAttack:n,itemArmor:o,id:i}}let Z=Q("Magic Sword","weapon",20,0,"n1"),ee=Q("Magic Armor","armor",0,2,"n2"),te=(Q("Magic Ring","misc",1,1,"n3"),Q("Ultra Sword","weapon",40,0,"n4"),Q("Ultra Armor","armor",0,4,"n5"),Q("Ultra Ring","misc",2,2,"n6"),Q("Rusty Sword","weapon",1,0,"n7"),Q("Rusty Armor","armor",0,1,"n8"),Q("Gold Ring","misc",0,1,"n9"),Q("Health Potion","quest item",0,0,"n10"),document.createElement("img"));te.setAttribute("style","height:15px;width:15px;fill:white;"),te.src="tree.png";let ne=document.createElement("img");ne.setAttribute("style","height:15px;width:15px;fill:white;"),ne.src="tree.png";class oe{constructor(e,t,n,o){this.type=e,this.text=t,this.modifiers=n,this.nextStoryElement=o,oe.instances.push(this)}static instances=[];static getAllInstances(){return oe.instances}}let ie,re=new oe("description",["Holy ballsacks, what a fight.","Welp, back to exploring."],"explorationEvent",void 0),ae=new oe("battle",["Encounter 2 is pissed though.","Oh, it is super pissed.","Time to fight!"],[q],re),se=new oe("randomEncounter",["You just found random encounter 2!"],{hasPlayerSeenMe:!1},ae),le=new oe("item",["This event is nice! It gives you an item!"],ee,void 0),ce=new oe("randomEncounter",["You just found random encounter 1!"],{hasPlayerSeenMe:!1},le),de=new oe("exploration",["You set out on the road again.","The forest is lush and hard to walk through.","The stranger was right - it will be hard to find your way here.","[Use WASD or click / tap on the map to move.]"],[{encounterStoryElement:ce,tileNumber:"#tile30",icon:te},{encounterStoryElement:se,tileNumber:"#tile100",icon:ne}],void 0),ue=new oe("consequence",[{dependency:"StrangerFriendly",consequenceText:["You hope that person winds what they are looking for.","Oh, well. You have your own needs to take care of, Dude."]},{dependency:"StrangerAnnoyed",consequenceText:["Well that person was a jerk. Not like Dude.","What a shit-faced poopster."]}],void 0,de),pe=new oe("dialogue",[{lineNumber:0,npcLine:'You see a person. They approach, and say: "Hello!".',responses:[{dialogueChoice:"And hello to you kind person! My name is Dude.",dialogueNextLine:1,points:1},{dialogueChoice:"Hello, more like hyulo! Dude here.",dialogueNextLine:2,points:-1}]},{lineNumber:1,npcLine:'"Well, hi, Dude. Nice to see a polite individual around these parts! How are you today?"',responses:[{dialogueChoice:"I am doing well.",dialogueNextLine:3,points:1},{dialogueChoice:"I need help...",dialogueNextLine:4,points:-1}]},{lineNumber:2,npcLine:'"Dude, I do not speak this foul-sounding language of yours," they say, sounding concerned. "Are you okay?".',responses:[{dialogueChoice:"I am doing well.",dialogueNextLine:3,points:1},{dialogueChoice:"I need help...",dialogueNextLine:4,points:0}]},{lineNumber:3,npcLine:'"Glad to hear it. Well, stay safe out there."',responses:[{dialogueChoice:"Goodbye, and good luck.",dialogueNextLine:5,points:1},{dialogueChoice:"Oh, piss off already.",dialogueNextLine:5,points:-1}]},{lineNumber:4,npcLine:'"Wish I could help you, friend. God bless."',responses:[{dialogueChoice:"It is alright. Take care of yourself, stranger.",dialogueNextLine:5,points:1},{dialogueChoice:"Thanks for nothing...",dialogueNextLine:5,points:-1}]},{lineNumber:5,npcLine:"The stranger says goodbye and leaves.",responses:[]}],["StrangerFriendly","StrangerNeutral","StrangerAnnoyed"],ue),me=new oe("description",["You chose 2."],void 0,pe),he=new oe("description",["You chose 1."],void 0,pe),fe=new oe("choice",["Hello!","This is the new introduction 2.","Fun again, is it not?","Certainly is.","Again. But now it is time to choose: 1 or 2?"],[{choiceText:"I will choose 1.",choiceModifiers:"testChoice1",choiceNextStory:he},{choiceText:"I will choose 2.",choiceModifiers:"testChoice2",choiceNextStory:me}],void 0),ge=new oe("item",["Enemies are dead!","This description has more strings.","Like one more.","Thank you for your patience.","As a reward, here is an item."],Z,fe),ye=new oe("battle",["Well now it is time to play!","This array has fewer strings too! Muahahaha.","It is a fight!"],[L,$,_,S],ge),xe=new oe("description",["Hello, Dude!","This is a new introduction.","Fun, is it not?","Certainly is."],void 0,ye),be=new oe("choice",["Now it is time to choose your class.","Choose wisely.","Or just clickity-clack."],[{choiceText:"Janitor.",choiceModifiers:"classJanitor",choiceNextStory:xe},{choiceText:"Accountant.",choiceModifiers:"classAccountant",choiceNextStory:xe},{choiceText:"Dancer.",choiceModifiers:"classDancer",choiceNextStory:xe}],void 0),we=(new oe("form",["Hello!","Please enter your name."],void 0,be),!1),ve=[];function Ce(e){let t=oe.getAllInstances();for(let n=0;n<t.length;n++)switch(t[n].type){case"description":case"item":case"battle":case"choice":case"exploration":case"randomEncounter":case"form":for(let o=0;o<t[n].text.length;o++)t[n].text[o]=t[n].text[o].replaceAll("Dude",e);break;case"dialogue":for(let o=0;o<t[n].text.length;o++){t[n].text[o].npcLine=t[n].text[o].npcLine.replaceAll("Dude",e);for(let i=0;i<t[n].text[o].responses.length;i++)t[n].text[o].responses[i].dialogueChoice=t[n].text[o].responses[i].dialogueChoice.replaceAll("Dude",e)}break;case"consequence":for(let o=0;o<t[n].text.length;o++)for(let i=0;i<t[n].text[o].consequenceText.length;i++)t[n].text[o].consequenceText[i]=t[n].text[o].consequenceText[i].replaceAll("Dude",e)}N.textContent=N.textContent.replace("a person",e)}function ke(e){for(;P.firstChild;)P.removeChild(P.firstChild);void 0!==e&&("dialogue"!==e.type&&"consequence"!==e.type?Ee(e,0):"dialogue"==e.type?Se(e,0):Ae(e,0))}function Ee(e,t,n){"randomEncounter"!=e.type&&"explorationEvent"!=e.modifiers||(Le=!1);let o=document.createElement("p");if(o.textContent=e.text[t],"yellow"==n&&o.setAttribute("style","color:yellow;"),P.appendChild(o),t<e.text.length){let n=document.createElement("button");n.textContent="Click here to continue.",P.appendChild(n),n.focus(),n.addEventListener("click",(()=>{if(t++,Ee(e,t),P.removeChild(n),t==e.text.length){switch(e.type){case"description":ke(e.nextStoryElement);break;case"battle":!function(e){e.modifiers.forEach((e=>{e.currentHP=e.maxHP})),g=e.modifiers,_e=e;let t=document.querySelector("#explorationBoard");null!==t&&(t.style.display="none"),x()}(e);break;case"item":!function(e){A.inventory.push(e);let t=document.createElement("li");if(t.textContent=`${e.name}, ${e.type}. Attack bonus: ${e.itemAttack}. Armor bonus: ${e.itemArmor}.`,V.appendChild(t),"quest item"!==e.type){let t=document.createElement("button");t.addEventListener("click",(()=>K(e))),t.textContent="Equip",t.setAttribute("style","font-size: 70%;"),t.setAttribute("id",`${e.id}`),V.appendChild(t)}}(e.modifiers),ie={text:[`Acquired ${e.modifiers.name}!`],type:"itemAcquired",nextStoryElement:e.nextStoryElement},Ee(ie,0,"yellow");break;case"itemAcquired":ke(ie.nextStoryElement);break;case"choice":!function(e){e.modifiers.forEach((e=>{let t=document.createElement("button");t.textContent=e.choiceText,t.setAttribute("class","choiceButton"),P.appendChild(t),t.addEventListener("click",(()=>{ve.push(e.choiceModifiers),"classJanitor"==e.choiceModifiers?(A=new C(A.name,13,15,100,100,"Normal Attack"),N.textContent=N.textContent.replace("Your class is unknown.","You are a Janitor."),Y.addEventListener("click",(()=>{switchAttack(A)}))):"classAccountant"==e.choiceModifiers?(A=new k(A.name,13,15,100,100,"Normal Attack"),N.textContent=N.textContent.replace("Your class is unknown.","You are an Accountant."),Y.addEventListener("click",(()=>{switchAttack(A)}))):"classDancer"==e.choiceModifiers&&(A=new E(A.name,13,15,100,100,"Normal Attack"),N.textContent=N.textContent.replace("Your class is unknown.","You are a Dancer."),Y.addEventListener("click",(()=>{switchAttack(A)}))),ke(e.choiceNextStory)}))}))}(e);break;case"exploration":!function(e){for(;P.firstChild;)P.removeChild(P.firstChild);let t=document.createElement("div");t.setAttribute("id","explorationBoard");let n=document.createElement("div");n.setAttribute("style","border-collapse:collapse; margin:3px; display:inline-grid; grid-template-columns: repeat(6, 25px);"),n.setAttribute("id","boardUnder"),M.appendChild(t),t.appendChild(n);for(let e=0;e<126;e++){let t=document.createElement("div");t.setAttribute("style","padding:5px;border:1px solid white;height:15px;width:15px;"),t.setAttribute("id",`tile${e}`),n.appendChild(t)}!function(e){let t=document.querySelectorAll('[id^="tile"]');for(let n=0;n<t.length;n++)for(let o=0;o<e.modifiers.length;o++)`#${t[n].id}`==e.modifiers[o].tileNumber&&(t[n].style.position="relative",e.modifiers[o].icon.style.position="absolute",t[n].appendChild(e.modifiers[o].icon))}(e);let o=document.createElement("div");o.setAttribute("id","circle"),o.setAttribute("style","background-color:white;border:1px solid white;border-radius:50%; z-index:10; height: 17px; width: 17px;"),o.setAttribute("tabindex","0"),document.querySelector("#tile120").appendChild(o);let i=o.getBoundingClientRect().x,r=o.getBoundingClientRect().y,a=i,s=r;document.addEventListener("keydown",(t=>{let l=n.getBoundingClientRect();switch(t.key){case"w":s-5>l.top&&1==Le&&(s-=5,Be(Te(o),e));break;case"a":a-5>l.left&&1==Le&&(a-=5,Be(Te(o),e));break;case"s":s+5+20<l.bottom&&1==Le&&(s+=5,Be(Te(o),e));break;case"d":a+5+18<l.right&&1==Le&&(a+=5,Be(Te(o),e))}let c=s-r,d=a-i;o.style.transform=`translate(${d}px, ${c}px)`})),n.addEventListener("click",(t=>{console.log($e(t.clientX,t.clientY));let n=document.querySelector(`#${$e(t.clientX,t.clientY)}`).getBoundingClientRect(),l=n.left+4-i,c=n.top+4-r+window.scrollY;o.style.transform=`translate(${l}px, ${c}px)`,Be(Te(o),e),a=n.left+4,s=n.top+4+window.scrollY}))}(e),we=!0;break;case"randomEncounter":for(;P.firstChild;)P.removeChild(P.firstChild);e.modifiers.hasPlayerSeenMe=!0,Le=!0,ke(e.nextStoryElement);break;case"form":!function(e){let t=document.createElement("div"),n=document.createElement("form"),o=document.createElement("input"),i=document.createElement("input");i.setAttribute("type","submit"),o.setAttribute("type","text"),n.appendChild(o),n.appendChild(i),t.appendChild(n),P.appendChild(t),i.addEventListener("click",(t=>{for(t.preventDefault(),answer=o.value,A.name=answer,Ce(answer);P.firstChild;)P.removeChild(P.firstChild);ke(e.nextStoryElement)}))}(e)}"explorationEvent"==e.modifiers&&(Le=!0)}}))}}function Ae(e,t){let n=document.createElement("p"),o=null;for(let t=0;t<e.text.length;t++)ve.includes(e.text[t].dependency)&&(o=t);if(null!==o){if(n.textContent=e.text[o].consequenceText[t],P.appendChild(n),t<e.text[o].consequenceText.length){let n=document.createElement("button");n.textContent="Click here to continue.",P.appendChild(n),n.focus(),n.addEventListener("click",(()=>{t++,P.removeChild(n),Ae(e,t)}))}t==e.text[o].consequenceText.length&&ke(e.nextStoryElement)}else ke(e.nextStoryElement)}let qe=0;function Se(e,t){let n=document.createElement("p");if(n.textContent=e.text[t].npcLine,P.appendChild(n),t!==e.text.length-1)e.text[t].responses.forEach((t=>{let n=document.createElement("button");n.textContent=t.dialogueChoice,P.appendChild(n),n.setAttribute("class","choiceButton"),n.addEventListener("click",(()=>{P.querySelectorAll("button").forEach((e=>{e.remove()}));let n=document.createElement("p");n.textContent=`"${t.dialogueChoice}"`,P.appendChild(n),qe+=t.points,Se(e,t.dialogueNextLine)}))}));else{qe<=-2?ve.push(e.modifiers[2]):qe<2?ve.push(e.modifiers[1]):qe>=2&&ve.push(e.modifiers[0]),qe=0;let t=document.createElement("button");t.textContent="Click here to continue.",P.appendChild(t),t.focus(),t.addEventListener("click",(()=>{ke(e.nextStoryElement)}))}}let _e=null,Le=!0;function $e(e,t){let n=document.querySelectorAll('[id^="tile"]');for(let o=0;o<n.length;o++){let i=n[o].getBoundingClientRect();if(e<i.right&&e>i.left&&t<i.bottom&&t>i.top)return n[o].id}return null}function Te(e){let t=e.getBoundingClientRect(),n=document.querySelectorAll('[id^="tile"]');for(let e=0;e<n.length;e++){let o=n[e].getBoundingClientRect();if(t.left<o.right&&t.right>o.left&&t.top<o.bottom&&t.bottom>o.top)return n[e].id}return null}function Be(e,t){for(let n=0;n<t.modifiers.length;n++)`#${e}`!=t.modifiers[n].tileNumber||t.modifiers[n].encounterStoryElement.modifiers.hasPlayerSeenMe||ke(t.modifiers[n].encounterStoryElement)}let He=document.createElement("dialog");He.innerHTML="\n    <button id='closeButton2'>Close</button>\n    <div id='statsBox'>\n    <h2>Stats</h2>\n    <ul id ='statsList'>\n        <li id='stats_gender'>You do not remember your gender.</li>\n        <li id='stats_race'>You do not remember your race.</li>\n        <li id='stats_romantic_partner'>You do not remember who your romantic partner was.</li>\n        <li id='stats_cause_of_death'>You do not remember your cause of death.</li>\n        <li id='stats_evil_benevolent'>\n            <div class='stats_meter' id='stats_meter_evil'>\n                <div class='stats_line' id='stats_line_evil'>Evil</div>\n                <div class='stats_line' id='stats_line_benevolent'>Benevolent</div>\n            </div>\n        </li>\n        <li id='stats_somber_silly'>\n            <div class='stats_meter' id='stats_meter_somber'>\n                <div class='stats_line' id='stats_line_somber'>Somber</div>\n                <div class='stats_line' id='stats_line_silly'>Silly</div>\n            </div>\n        </li>\n    </ul>\n    </div>\n",document.body.appendChild(He),console.log("stats_button:",D),document.addEventListener("DOMContentLoaded",(()=>{console.log("DOM fully loaded"),D.addEventListener("click",(()=>{He.showModal(),document.querySelector("#closeButton2").addEventListener("click",(()=>{He.classList.add("hide"),He.addEventListener("animationend",O)}))}))})),ke(de)})()})();